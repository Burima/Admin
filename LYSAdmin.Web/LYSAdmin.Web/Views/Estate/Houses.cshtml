@model LYSAdmin.Model.House
@{
    ViewBag.Title = "House";
}
<link href="~/Content/Custom/Houses.css" rel="stylesheet" />
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&libraries=places"></script>
<div class="row  border-bottom white-bg dashboard-header">
    <!--Center Content-->
    <div class="col-sm-9">
       <h3 class="m-t-none m-b">Add new House</h3>
        <ul class="panel-group" id="accordion">
            <li>
                <h3><a href="#accordionOne" data-toggle="collapse" data-parent="#accordion">Basic Information</a></h3>
                    <ul id="accordionOne" class="panel-collapse panel in">
                        <li class="saving-progress hidden"><h4>Saved!</h4></li>
                        <li>
                            <div class="form-group">
                                <label>House Name</label>
                                <input type="text" id="txtHouseName" placeholder="Enter house name" class="form-control input-large" maxlength="50" tabindex="1" required name="House.HouseName">

                                <div class="row-space-top-1 max-character-entered"><span class="span-char-left">50</span> characters left</div>
                            </div>
                        </li>
                        <li>
                            <div class="form-group">
                                <label>Description</label>
                                <textarea rows="4" id="txtDescription" placeholder="Description" class="form-control input-large" maxlength="500" tabindex="3" name="House.Description"></textarea>

                                <div class="row-space-top-1 max-character-entered"><span class="span-char-left">500</span> characters left</div>
                            </div>
                        </li>
                        <li>
                            <div class="form-group row-padding-top-5">
                                <div class="pull-right">
                                    <button id="btnNext" class="btn btn-primary" type="button" tabindex="5">Next</button>
                                </div>
                            </div>

                        </li>

                   </ul>
            </li>
            <li>
                <h3><a href="#accordionTwo" data-toggle="collapse" data-parent="#accordion">Locality</a></h3>
                   <ul id="accordionTwo" class="panel-collapse panel">
                    <li>
                        <div class="row">
                            <div class="col-md-6">
                                <label>Address</label>
                            </div>
                            <div class="col-md-6">
                                <label>Address</label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" id="txtAddress" placeholder="Enter Address" class="form-control input-sm" maxlength="50" tabindex="1" required name="House.HouseName">
                                <div class="row-space-top-1 max-character-entered"><span class="span-char-left">50</span> characters left</div>
                            </div>
                            <div class="col-md-6">
                                <input type="text" id="txtLandmark" placeholder="Enter Landmark" class="form-control input-sm" maxlength="50" tabindex="1" required name="House.HouseName">
                                <div class="row-space-top-1 max-character-entered"><span class="span-char-left">50</span> characters left</div>
                            </div>
                        </div>
                        <div class="row">
                            <div id="map-canvas" class="col-md-12"></div>
                        </div>
                       
                    </li>
                </ul>
                
            </li>


        </ul>
   </div>

    <div class="col-sm-3">
        <div class="statistic-box">
            <h4>
                Project Beta progress
            </h4>
            <p>
                You have two project with not compleated task.
            </p>
            <div class="row text-center">
                <div class="col-lg-6">
                    <canvas id="polarChart" width="80" height="80"></canvas>
                    <h5>Kolter</h5>
                </div>
                <div class="col-lg-6">
                    <canvas id="doughnutChart" width="78" height="78"></canvas>
                    <h5>Maxtor</h5>
                </div>
            </div>
            <div class="m-t">
                <small>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</small>
            </div>

        </div>
    </div>
</div>

@section scripts{

    <script>
        //reference url
        var HousesUrl = '@Url.Action("Houses","Properties")';

        $(document).ready(function () {
            charlimit();
            inputkeyup();
            $('#btnCancel').click(function () {
                window.location = HousesUrl;
            });
            //$('#nav > li > a').click(function () {
            //    if ($(this).attr('class') != 'active') {
            //        $('#nav li ul').slideUp();
            //        $(this).next().slideToggle();
            //        $('#nav li a').removeClass('active');
            //        $(this).addClass('active');
            //    } else {
            //        $('#nav li ul').slideUp();
            //        $(this).next().slideToggle();
            //        $(this).removeClass('active');
            //        $(this).next().addClass('active');
            //    }
            //});
        });
        
        //show the limit of char left
        function charlimit() {
            $("form :input").each(function () {
                var input = $(this); // This is the jquery object of the input, do what you will
                if (input.parent().find("span.span-char-left").length) {
                    input.parent().find("span.span-char-left").text((input.attr("maxlength")) - (input.val().trim().length));
                }
            });
        };

        //keyup event for all inputs
        function inputkeyup() {
            $("form :input").each(function () {
                var input = $(this);
                input.keyup(function () {
                    if (input.parent().find("span.span-char-left").length) {
                        input.parent().find("span.span-char-left").text((input.attr("maxlength")) - (input.val().trim().length));
                    }
                });
            })
        };

        var geocoder;
        var map;
        var infowindow;
        var latlng;
        function initialize() {
            geocoder = new google.maps.Geocoder();
            latlng = new google.maps.LatLng(21.1311084, 82.7792231);
            var mapOptions = {
                zoom: 4,
                center: latlng
            }
            map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
        }

        function codeAddress() {
            var address = document.getElementById('txtAddress').value;
            geocoder.geocode({ 'txtAddress': address }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    map.setCenter(results[0].geometry.location);
                    var marker = new google.maps.Marker({
                        map: map,
                        position: results[0].geometry.location,
                    });
                    var request = {
                        location: results[0].geometry.location,
                        radius: 1000,
                        query: 'restaurant'
                    };
                    infowindow = new google.maps.InfoWindow();
                    var service = new google.maps.places.PlacesService(map);
                    service.textSearch(request, callback);
		
                } else {
                    alert('Geocode was not successful for the following reason: ' + status);
                }
            });
        }

        function callback(results, status) {
            if (status == google.maps.places.PlacesServiceStatus.OK) {
                for (var i = 0; i < results.length; i++) {
                    createMarker(results[i]);
                }
            }
        }

        function createMarker(place) {
            var placeLoc = place.geometry.location;
            var marker = new google.maps.Marker({
                map: map,
                position: place.geometry.location
            });
        }

        google.maps.event.addDomListener(window, 'load', initialize);
    </script>
}
